---
import Tags from '@components/Tags.astro';
import StoryPreviousNext from '../story/StoryPreviousNext.astro';
import { t } from '@utils/use-lang';
import SocialShare from '@components/SocialShare.astro';
import type { Post } from 'src/schemas/post';
import Button from '@components/cards/Button.astro'; // workaround for https://github.com/withastro/astro/issues/7761
import Callout from '@components/cards/Callout.astro';
import Toggle from '@components/cards/Toggle.astro';
import Header from '@components/cards/Header.astro';
import Product from '@components/cards/Product.astro';
import Audio from '@components/cards/Audio.astro';
import Video from '@components/cards/Video.astro';
import File from '@components/cards/File.astro';
import Blockquote from '@components/Blockquote.astro';
import Bookmark from '@components/cards/Bookmark.astro';
import Gallery from '@components/cards/Gallery.astro';
import Giscus from '@components/Giscus.astro';
export interface Props {
    post: Post;
    nextPost?: Post;
    prevPost?: Post;
}

const { post, nextPost, prevPost } = Astro.props;

const { Content: PostContent } = await post.render();
---

<div class="post-wrap max-w-1100 relative mx-auto">
    <div id="post-body" class="post-body max-w-740 relative mx-auto px-4">
        <PostContent
            components={{ Button, Callout, Toggle, Header, Product, Audio, Video, File, Blockquote, Bookmark, Gallery }}
        />
    </div>
</div>

<footer class="post-footer max-w-740 mx-auto px-4 pt-10">
    <div class="post-share mt-8 flex flex-col md:flex-row">
        <Tags tags={post.data.tags} />
        <!-- <SocialShare
            post={post}
            trackingName="Header"
            divClass="order-first mb-6 md:mb-0 md:order-none"
        /> -->
        <SocialShare post={post} trackingName="Footer" divClass="order-first mb-6 md:mb-0 md:order-none" />
    </div>

    {/*{!-- Giscus comments --}*/}
    <Giscus />

    {/*{!-- Previous and next article --}*/}
    <div class="prev-next pb-8">
        <hr class="my-10" />
        {prevPost && <StoryPreviousNext post={prevPost} storyTitle={t(`Previous article`)} divClass="mb-8" />}

        {nextPost && <StoryPreviousNext post={nextPost} storyTitle={t(`Next article`)} divClass="" />}
    </div>
</footer>
